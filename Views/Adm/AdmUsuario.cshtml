
@{
    ViewBag.Title = "Adm Usuario";
    var usuario = HttpContext.Current.Session["Usuario"] as dynamic;

    if (usuario == null || usuario.id_tipo_usu != 1)
    {
        // Redirigir al usuario a la página deseada cuando no hay usuario o no es administrador ni instructor
        Response.RedirectToRoute(new { controller = "Home", action = "Index" });
        Response.End();
    }
}

<div class="py-5 col-md-12">
    <div class="row py-5 justify-content-center">
        <div class="col-8">
            <div class="text-center py-4">
                <h4 class="display-6">Administrar Usuarios</h4>
            </div>
            @if (ViewBag.Usuario != null)
            {
                <div class="card card-body table-responsive">
                    <table class="table table-striped table-hover ">
                        <thead>
                            <tr>
                                <th scope="col">Rut</th>
                                <th scope="col">DV</th>
                                <th scope="col">Primer Nombre</th>
                                <th scope="col">Apellido Paterno</th>
                                <th scope="col">Fecha de nacimiento</th>
                                <th scope="col">Celular</th>
                                <th scope="col">Direccion</th>
                                <th scope="col">Genero</th>
                                <th scope="col">Cinturon</th>
                                <th scope="col">Correo</th>
                                <th scope="col">Tipo usuario</th>
                                <th scope="col">Modificar</th>
                                <th scope="col">Eliminar</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var x in ViewBag.Usuario)
                            {
                            <tr>
                                <td>@x.rut</td>
                                <td>@x.DV</td>
                                <td>@x.PNombre</td>
                                <td>@x.APaterno</td>
                                <td>@x.FNacimiento</td>
                                <td>@x.celular</td>
                                <td>@x.direccion</td>
                                <td>@x.genero</td>
                                <td>@x.cinturon</td>
                                <td>@x.correo</td>
                                <td>@x.id_tipo_usu</td>

                                <td><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Modificar</button></td>
                                <td><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#Eliminar">Eliminar</button></td>
                            </tr>

                            }
                        </tbody>
                    </table>


                </div>
            }
            else
            {
                <p>No hay Usuario registrados registrados</p>
            }
        </div>
    </div>
</div>

